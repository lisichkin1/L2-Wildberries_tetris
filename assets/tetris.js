import{PLAYING_FIELD_COLUMN,PLAYING_FIELD_ROW,TETRAMINO_FORMS,TETRAMINO_NAMES,getRandomTetramino,positionIndex,rotateForm}from"./utils.js";let assetField=[];export const buildField=()=>{const t=document.querySelector(".teris__container");t.innerHTML="";for(let o=0;o<PLAYING_FIELD_ROW;o++){assetField[o]=[];for(let e=0;e<PLAYING_FIELD_COLUMN;e++){assetField[o][e]=0;const r=document.createElement("div");t.appendChild(r)}}return assetField};export const createTetramino=()=>{const t=getRandomTetramino(TETRAMINO_NAMES),o=TETRAMINO_FORMS[t];return{name:t,form:o,column:PLAYING_FIELD_COLUMN/2-Math.floor(o.length/2),row:-2}};export const drawTetramino=(t,o)=>{const e=t.name,r=t.form.length;for(let n=0;n<r;n++)for(let i=0;i<r;i++)1==t.form[n][i]&&(t.row+n<0||o[positionIndex(t.row+n,t.column+i)].classList.add(e))};export const tetraminoRight=(t,o)=>(t.column+=1,checkBorder(t,o)&&(t.column-=1),t);export const tetraminoLeft=(t,o)=>(t.column-=1,checkBorder(t,o)&&(t.column+=1),t);export const tetraminoRotate=(t,o)=>{const e=t.form,r=rotateForm(t);return t.form=r,checkBorder(t,o)&&(t.form=e),t};export const checkBorder=(t,o)=>{const{form:e}=t,r=e.length;for(let n=0;n<r;n++)for(let i=0;i<r;i++)if(0!=e[n][i]){if(exitLimit(t,n,i,o))return!0;if(isCollide(t,n,i,o))return!0}return!1};const isCollide=(t,o,e,r)=>{var n;return null===(n=r[t.row+o])||void 0===n?void 0:n[t.column+e]},exitLimit=(t,o,e,r)=>{const{column:n,row:i}=t;return n+e<0||n+e>=PLAYING_FIELD_COLUMN||i+o>=r.length};